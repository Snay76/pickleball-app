<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pickleball</title>

  <!-- Supabase (chargé une seule fois) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
  <h1>Pickleball</h1>

  <hr />

  <h2>Connexion</h2>

  <label for="email">Courriel</label><br />
  <input
    id="email"
    name="email"
    type="email"
    placeholder="nom@exemple.com"
    autocomplete="email"
  />
  <button id="loginBtn" type="button">Recevoir un lien</button>

  <p id="status"></p>

  <hr />

  <button id="test" type="button">Tester JavaScript</button>

  <!-- Ton code (chargé une seule fois) -->
  <script src="/app.js?v=1"></script>

  <!-- Wiring des boutons -->
  <script>
    document.getElementById("test").addEventListener("click", () => {
      alert("JavaScript chargé correctement");
    });

    document.getElementById("loginBtn").addEventListener("click", () => {
      const email = document.getElementById("email").value.trim();
      if (!email) return alert("Courriel requis");

      if (typeof window.sendMagicLink !== "function") {
        return alert("Erreur: app.js n'est pas chargé (sendMagicLink introuvable).");
      }

      window.sendMagicLink(email);
    });
  </script>
</body>
</html>
